<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

{% if resume.education.size > 0 %}
<section>
  <div class="npb">
    <h2 id="education" class="h3 hr-bottom">
      {{ strings.resume.education | default:"Education" }}
      <span class="symbol {{ icons.education | default:'icon-library' }}"></span>
    </h2>
    {% for edu in resume.education %}
    <section>
      <header class="{% unless forloop.first %}mt2{% endunless %}">
        {% if edu.startDate.size > 0 %}
        <p class="faded">
          {% assign todayYear = 'now' | date: "%Y" %}
          {% assign startYear = edu.startDate | date: "%Y" %}
          {% assign endYear = edu.endDate | date: "%Y" | default: todayYear %}
          {% assign diff = endYear | minus: startYear %}
          {% assign unit = "years" %}
          {% if diff == 0 %}
          {% assign todayMonth = 'now' | date: "%m" %}
          {% assign startMonth = edu.startDate | date: "%m" %}
          {% assign endMonth = edu.endDate | date: "%m" | default: todayMonth %}
          {% assign diff = endMonth | minus: startMonth %}
          {% assign unit = "month(s)" %}
          {% endif %}
          {% include components/from-to.html from=edu.startDate to=edu.endDate format=from_to_format %}<i
            class="faded"><span class="icon-history"></span> {{diff}} {{unit}}</i>
        </p>
        {% endif %}
        <h3 class="h4 faded" {% if edu.endDate.size>
          0 %}property="alumniOf" typeof="EducationalOrganization"{% endif %}>
          {% capture study_type %}<span class="bc">{{ edu.studyType }}</span>{%
          endcapture %} {% capture area %}<span class="bc"> {{ edu.area }}</span>{% endcapture %} {% capture institution
          %}<span class="bc" {% if edu.endDate.size>
            0 %}property="name"{% endif %}>
            <a href="{{edu.url}}">{{ edu.institution }}</a> </span>{% endcapture %}
          {% capture gpa_us %}<span class="bc">{{ edu.gpa_us }}</span>{% endcapture %}
          {% capture gpa_de %}<span class="bc">{{ edu.gpa_de }}</span>{% endcapture %}
          <span>
            {{study_type}} in {{area}} from {{institution}} with GPA of {{gpa_us}}
            <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#gpaInfoModal">
              <i class="fas fa-info-circle"></i>
            </button>
          </span>
        </h3>
      </header>

      {% if edu.courses.size > 0 %}
      <h4 class="sr-only">{{ strings.resume.courses | default:"Courses" }}</h4>
      <ul>
        {% for course in edu.courses %}
        <li>{{ course }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </section>
    {% if forloop.first %}
  </div>
  {% endif %} {% endfor %}
</section>
{% endif %}

<!-- GPA Info Modal -->
<div class="modal fade" id="gpaInfoModal" tabindex="-1" role="dialog" aria-labelledby="gpaInfoModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="gpaInfoModalLabel">GPA Information</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        The GPA (Grade Point Average) is a standard way of measuring academic achievement in the U.S. The German GPA is calculated differently and typically ranges from 1.0 (best) to 5.0 (worst). Here, the US GPA is {{ edu.gpa_us }} and the German GPA is {{ edu.gpa_de }}.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
